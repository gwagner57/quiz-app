<!DOCTYPE html>
            <html lang="en">
            <head>
              <meta charset="UTF-8">
              <meta name="viewport" content="width=device-width, initial-scale=1.0">
              <link rel="stylesheet" type="text/css" href="Quiz.css">
              <title>quiz.title</title>
            </head>
            <body>
            <div class="container" id="container">
              <h1 id ="title">Quiz Title</h1>
              <script>
                 // Get the current URL
                const currentURL = window.location.href;

                  // Extract the file name from the URL
                  const fileName = currentURL.substring(currentURL.lastIndexOf('/')+1);
                  
                  // Decode any URL-encoded characters in the file name
                   const decodedFileName = decodeURIComponent(fileName);
    
                    const fileNameWithoutExtension = decodedFileName.substring(0, decodedFileName.lastIndexOf('.'));


                     // Display the file name inside the <h1> element
                   const fileNameDisplay = document.getElementById("title");
                   fileNameDisplay.textContent =  fileNameWithoutExtension;
                </script><div id=q0>
<p>Which of the following are correct statements about an XHTML document?</p><input type="checkbox" name='XHTML Requirements' value='The root element and all its descendant elements must be in the namespace "http://www.w3.org/1999/xhtml".' /> The root element and all its descendant elements must be in the namespace "http://www.w3.org/1999/xhtml".<br>
<input type="checkbox" name='XHTML Requirements' value='The root element must be <code>&lt;xhtml&gt;</code>.' /> The root element must be <code>&lt;xhtml&gt;</code>.<br>
<input type="checkbox" name='XHTML Requirements' value='The document must be well-formed.' /> The document must be well-formed.<br>
<input type="checkbox" name='XHTML Requirements' value='Case does not matter for element names, so both <code>H1</code> and <code>h1</code> can be used.' /> Case does not matter for element names, so both <code>H1</code> and <code>h1</code> can be used.<br>
</div>
<div id=q1>
<p>Complete the following HTML code such that the <code>a</code> element works as a cross-reference link for jumping to Figure 1:</p>
<pre>&lt;figure id="fig1"&gt;
  &lt;img src="model-diagram.svg" /&gt;
  &lt;figcaption&gt;Figure 1: How to make a model&lt;/figcaption&gt;
&lt;figure&gt;
&lt;div&gt;lorem ipsum, lorem ipsum, lorem ipsum, lorem ipsum, ...&lt;/div&gt;
&lt;p&gt;The diagram in &lt;a href="{1:SHORTANSWER_C:~=#fig1~%50%fig1}"&gt;Figure 1&lt;/a&gt; shows how to make a model.&lt;/p&gt;
</pre><input type="txt" name='Cross-reference' /> 
</div>
<div id=q2>
<p>What does the <code>&lt;ol&gt;</code> element mark up?</p><input type="checkbox" name='What does the &lt;ol&gt; element mark up?' value='<p>An open list, like</p>
<ul style="list-style-type:circle"><li>bla</li><li>blabla</li><li>...<br></li></ul>
      
        <p>This concept does not exist.</p>' /> <p>An open list, like</p>
<ul style="list-style-type:circle"><li>bla</li><li>blabla</li><li>...<br></li></ul>
      
        <p>This concept does not exist.</p><br>
<input type="checkbox" name='What does the &lt;ol&gt; element mark up?' value='<p>An itemized list, like</p>
<ul style="list-style-type:square"><li>bla</li><li>blabla</li><li>blablabla<br></li></ul>
      
        <p>This corresponds to <code>ul</code>.</p>' /> <p>An itemized list, like</p>
<ul style="list-style-type:square"><li>bla</li><li>blabla</li><li>blablabla<br></li></ul>
      
        <p>This corresponds to <code>ul</code>.</p><br>
<input type="checkbox" name='What does the &lt;ol&gt; element mark up?' value='<p>An ordinary (basic) list, like</p>
<ul style="list-style-type:none"><li>bla</li><li>blabla</li><li>blablabla<br></li></ul>
      
        <p>This concept does not exist.</p>' /> <p>An ordinary (basic) list, like</p>
<ul style="list-style-type:none"><li>bla</li><li>blabla</li><li>blablabla<br></li></ul>
      
        <p>This concept does not exist.</p><br>
<input type="checkbox" name='What does the &lt;ol&gt; element mark up?' value='<p>An enumerated list, like</p>
<ol><li>bla</li><li>blabla</li><li>blablabla<br></li></ol>
      
        <p>An enumerated list is also called <span style="font-style: italic;">ordered </span>list.</p>' /> <p>An enumerated list, like</p>
<ol><li>bla</li><li>blabla</li><li>blablabla<br></li></ol>
      
        <p>An enumerated list is also called <span style="font-style: italic;">ordered </span>list.</p><br>
</div>
<div id=q3>
<p>Which of the following&nbsp;HTML fragments are valid XHTML?</p><code></code><input type="checkbox" name='XHTML block-level and inline elements' value='<pre>&lt;html xmlns="http://www.w3.org/1999/xhtml"&gt;
  &lt;head&gt;
    &lt;title&gt;My Title&lt;/title&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;p&gt;Lorem ipsum...&lt;/p&gt;
  &lt;/body&gt;
&lt;/html&gt;</pre>
      
        <br>' /> <pre>&lt;html xmlns="http://www.w3.org/1999/xhtml"&gt;
  &lt;head&gt;
    &lt;title&gt;My Title&lt;/title&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;p&gt;Lorem ipsum...&lt;/p&gt;
  &lt;/body&gt;
&lt;/html&gt;</pre>
      
        <br><br>
<input type="checkbox" name='XHTML block-level and inline elements' value='<pre>&lt;h:html xmlns:h="http://www.w3.org/1999/xhtml"&gt;
  &lt;h:head&gt;
    &lt;h:title&gt;My Title&lt;/h:title&gt;
  &lt;/h:head&gt;
  &lt;h:body&gt;
    &lt;h:div&gt;Lorem ipsum...&lt;/h:div&gt;
  &lt;/h:body&gt;
&lt;/h:html&gt;</pre>
      
        <br>' /> <pre>&lt;h:html xmlns:h="http://www.w3.org/1999/xhtml"&gt;
  &lt;h:head&gt;
    &lt;h:title&gt;My Title&lt;/h:title&gt;
  &lt;/h:head&gt;
  &lt;h:body&gt;
    &lt;h:div&gt;Lorem ipsum...&lt;/h:div&gt;
  &lt;/h:body&gt;
&lt;/h:html&gt;</pre>
      
        <br><br>
<input type="checkbox" name='XHTML block-level and inline elements' value='<pre>&lt;h:html xmlns:h="http://www.w3.org/1999/xhtml"&gt;
  &lt;h:head&gt;
    &lt;h:meta charset="utf-8"&gt;
  &lt;/h:head&gt;
  &lt;h:body&gt;
    &lt;h:p&gt;Lorem ipsum...&lt;/h:p&gt;
  &lt;/h:body&gt;
&lt;/h:html&gt;</pre>
      
        The <code>head</code> element must have a <code>title</code> child element!' /> <pre>&lt;h:html xmlns:h="http://www.w3.org/1999/xhtml"&gt;
  &lt;h:head&gt;
    &lt;h:meta charset="utf-8"&gt;
  &lt;/h:head&gt;
  &lt;h:body&gt;
    &lt;h:p&gt;Lorem ipsum...&lt;/h:p&gt;
  &lt;/h:body&gt;
&lt;/h:html&gt;</pre>
      
        The <code>head</code> element must have a <code>title</code> child element!<br>
<input type="checkbox" name='XHTML block-level and inline elements' value='<pre>&lt;html xmlns="http://www.w3.org/1999/xhtml"&gt;
  &lt;head&gt;
    &lt;title&gt;My Title&lt;/title&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;a id="example" href="http://www.examples.org"/&gt;Jump!&lt;/a&gt;
  &lt;/body&gt;
&lt;/html&gt;</pre>
      
        The <code>body</code> element does not allow any inline elements, such as <code>a</code>, as child elements.' /> <pre>&lt;html xmlns="http://www.w3.org/1999/xhtml"&gt;
  &lt;head&gt;
    &lt;title&gt;My Title&lt;/title&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;a id="example" href="http://www.examples.org"/&gt;Jump!&lt;/a&gt;
  &lt;/body&gt;
&lt;/html&gt;</pre>
      
        The <code>body</code> element does not allow any inline elements, such as <code>a</code>, as child elements.<br>
<input type="checkbox" name='XHTML block-level and inline elements' value='<pre>&lt;h:html xmlns:h="http://www.w3.org/1999/xhtml"&gt;
  &lt;head&gt;
    &lt;title&gt;My Title&lt;/title&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;p&gt;Lorem ipsum...&lt;/p&gt;
  &lt;/body&gt;
&lt;/h:html&gt;</pre>
      
        <p>Since there is no default namespace declaration, the elements <code>head</code>, <code>title</code>, <code>body</code> and <code>p</code> are not XHTML elements!<br></p>' /> <pre>&lt;h:html xmlns:h="http://www.w3.org/1999/xhtml"&gt;
  &lt;head&gt;
    &lt;title&gt;My Title&lt;/title&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;p&gt;Lorem ipsum...&lt;/p&gt;
  &lt;/body&gt;
&lt;/h:html&gt;</pre>
      
        <p>Since there is no default namespace declaration, the elements <code>head</code>, <code>title</code>, <code>body</code> and <code>p</code> are not XHTML elements!<br></p><br>
</div>
<div id=q4>
<p>Which is the HTML version used by the page http://reiseauskunft.bahn.de?</p><p>You can find it out by going to the website and inspect its HTML code.<br></p><input type="checkbox" name='HTML version' value='<p>XHTML 1.1<br></p>' /> <p>XHTML 1.1<br></p><br>
<input type="checkbox" name='HTML version' value='<p>HTML 4<br></p>' /> <p>HTML 4<br></p><br>
<input type="checkbox" name='HTML version' value='<p>XHTML 1.0<br></p>' /> <p>XHTML 1.0<br></p><br>
<input type="checkbox" name='HTML version' value='<p>HTML5<br></p>' /> <p>HTML5<br></p><br>
<input type="checkbox" name='HTML version' value='<p>XHTML5<br></p>' /> <p>XHTML5<br></p><br>
</div>
<div id=q5>
<p>Which of the following documents are valid XHTML?</p><input type="checkbox" name='Valid XHTML' value='<pre>&lt;xhtml:html xmlns:xhtml="http://www.w3.org/1999/xhtml"&gt;
  &lt;xhtml:head&gt;
    &lt;xhtml:title&gt;Page title&lt;/xhtml:title&gt;
  &lt;/xhtml:head&gt;
  &lt;xhtml:body&gt; &lt;p&gt;Paragraph&lt;/p&gt; &lt;/xhtml:body&gt;
&lt;/xhtml:html&gt;
</pre>
      
        <p>This is a valid XHTML fragment, since all mandatory elements are provided, and all elements are in the XHTML namespace (for which a namespace prefix is declared).</p>' /> <pre>&lt;xhtml:html xmlns:xhtml="http://www.w3.org/1999/xhtml"&gt;
  &lt;xhtml:head&gt;
    &lt;xhtml:title&gt;Page title&lt;/xhtml:title&gt;
  &lt;/xhtml:head&gt;
  &lt;xhtml:body&gt; &lt;p&gt;Paragraph&lt;/p&gt; &lt;/xhtml:body&gt;
&lt;/xhtml:html&gt;
</pre>
      
        <p>This is a valid XHTML fragment, since all mandatory elements are provided, and all elements are in the XHTML namespace (for which a namespace prefix is declared).</p><br>
<input type="checkbox" name='Valid XHTML' value='<pre>&lt;html xmlns="http://www.w3.org/1999/xhtml"&gt;
  &lt;head&gt;&lt;/head&gt;
  &lt;body&gt; &lt;p /&gt; &lt;/body&gt;
&lt;/html&gt;
</pre>
      
        <p>This is not valid, since the &lt;<code style="font-weight: bold;">head&gt;</code> mandatory child element &lt;<strong><code>title&gt;</code></strong> is <strong>missing</strong>.<br />Also, the &lt;p&gt; element is not an empty one.</p>' /> <pre>&lt;html xmlns="http://www.w3.org/1999/xhtml"&gt;
  &lt;head&gt;&lt;/head&gt;
  &lt;body&gt; &lt;p /&gt; &lt;/body&gt;
&lt;/html&gt;
</pre>
      
        <p>This is not valid, since the &lt;<code style="font-weight: bold;">head&gt;</code> mandatory child element &lt;<strong><code>title&gt;</code></strong> is <strong>missing</strong>.<br />Also, the &lt;p&gt; element is not an empty one.</p><br>
<input type="checkbox" name='Valid XHTML' value='<pre>&lt;html xmlns="http://www.w3.org/1999/xhtml"&gt;
  &lt;body&gt; &lt;hr /&gt; &lt;/body&gt;
&lt;/html&gt;
</pre>
      
        <p>This is not a valid XHTML fragment, since the <code style="font-weight: bold;">html</code> element's mandatory child element <strong><code>head</code></strong> is <strong>missing</strong>.</p>' /> <pre>&lt;html xmlns="http://www.w3.org/1999/xhtml"&gt;
  &lt;body&gt; &lt;hr /&gt; &lt;/body&gt;
&lt;/html&gt;
</pre>
      
        <p>This is not a valid XHTML fragment, since the <code style="font-weight: bold;">html</code> element's mandatory child element <strong><code>head</code></strong> is <strong>missing</strong>.</p><br>
<input type="checkbox" name='Valid XHTML' value='<pre>&lt;html xmlns="http://www.w3.org/1999/xhtml"&gt;
  &lt;head&gt;
    &lt;title&gt;Page title&lt;/title&gt;
  &lt;/head&gt;
  &lt;body&gt; &lt;hr /&gt; &lt;/body&gt;
&lt;/html&gt;
</pre>
      
        <p>This is a valid XHTML fragment, since all mandatory elements are provided, and all elements are in the XHTML namespace (which is declared as the default namespace).</p>' /> <pre>&lt;html xmlns="http://www.w3.org/1999/xhtml"&gt;
  &lt;head&gt;
    &lt;title&gt;Page title&lt;/title&gt;
  &lt;/head&gt;
  &lt;body&gt; &lt;hr /&gt; &lt;/body&gt;
&lt;/html&gt;
</pre>
      
        <p>This is a valid XHTML fragment, since all mandatory elements are provided, and all elements are in the XHTML namespace (which is declared as the default namespace).</p><br>
</div>
<div id="Submitd"><button id="Submit">Submit</button></div>
            <div id="results-container"></div>
            <script>
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              document.addEventListener("DOMContentLoaded", function () {
    // Function to collect user inputs and checked checkboxes

const resultsContainer = document.getElementById('results-container');



function all(){

  
  

// Get the number of questions by counting the <div> elements with IDs q0, q1, q2, etc.
const numberOfQuestions = document.querySelectorAll('div[id^="q"]').length;

//console.log('Number of questions:', numberOfQuestions);







function collectUserInputs() {
  const userInputArrays = {}; // Object to store user inputs for each question ID

  // Iterate through each question div (q0, q1, q2, q3, q4, etc.)
  for (let i = 0; i <numberOfQuestions; i++) {
    const questionId = `q${i}`;
    const questionDiv = document.getElementById(questionId);

    // Find all input elements within the question div
    const inputElements = questionDiv.querySelectorAll('input[type="txt"], input[type="text"], input[type="checkbox"]:checked');
    
     // Initialize an array for the current question ID
    userInputArrays[questionId] = [];



    // Iterate through the input elements and add them to the array
    inputElements.forEach((inputElement) => {
      const inputType = inputElement.type;
      const inputName = inputElement.name;
      const inputValue = inputElement.value;

      // Create an object to represent the input and add it to the array
      const userInput = {
        type: inputType,
        name: inputName,
        value: inputValue,
        Id: i,
      };

      userInputArrays[questionId].push(userInput);
    });
  }

  // Display the collected user inputs in the console
  //console.log(userInputArrays);
	return userInputArrays;
  // You can perform further processing or send the data to a server here
}


const userInputArrays = collectUserInputs();



//console.log(userInputArrays);
var originalURL = window.location.href;




// URL of the JSON file you want to load
const jsonFileURL = originalURL.replace(".html", ".json");

console.log(window.location.href);



// Function to fetch JSON data and return it as a Promise
function fetchJSONData(jsonFileURL) {
  return fetch(jsonFileURL)
    .then(response => {
      if (!response.ok) {
        throw new Error('Network response was not ok');
      }
      return response.json();
    });
}
 //let score =0;



// Function to decode HTML entities
function decodeHTMLEntities(input) {
  const parser = new DOMParser();
  const decodedDocument = parser.parseFromString(input, 'text/html');
  return decodedDocument.documentElement.textContent;
}

fetchJSONData(jsonFileURL)
  .then(jsonData => {
    // Now you can use jsonData as the JSON data returned from the function
    //console.log(jsonData);
    //return jsonData;
    
    
    
    
		// Function to replace HTML entities
		function replaceHtmlEntities(data) {
		  if (typeof data === 'string') {
		    // Replace HTML entities with their corresponding symbols
		    data = data.replace(/&lt;/g, '<').replace(/&gt;/g, '>');
		  } else if (typeof data === 'object') {
		    // Recursively replace HTML entities in nested objects and arrays
		    for (const key in data) {
		      if (data.hasOwnProperty(key)) {
			data[key] = replaceHtmlEntities(data[key]);
		      }
		    }
		  }
		  return data;
		}

		// Replace HTML entities in the JSON data
		const convertedData = replaceHtmlEntities(jsonData);

		//console.log(convertedData);
    
    
    
    
    
    
    
    
    
    
    
    
  let score =[0];
   // let Id = userInputArray[0].Id;
   for (let i = 0; i <numberOfQuestions; i++){
    score.push(0);
   }
    convertedData.forEach(question => {
    const type = question.type;
    
    //console.log(type);
    if (type === 'multichoice'){
    const answers = question.answer;
    //console.log(answers);
    answers.forEach(answerr => {
    //console.log(question.name[0].value);
    //console.log(answer.attributes.fraction);
    //console.log(answerr.value);
    for (let i = 0; i <numberOfQuestions; i++) {
    const questionId = `q${i}`; 
    const userInputArrayForQuestion = userInputArrays[questionId];
    if (userInputArrayForQuestion.length > 0) {
  	const firstName = userInputArrayForQuestion[0].name; // Access the name property of the first element
  	//console.log("Name of the first input for question", questionId, ":", firstName);
    
    
    
    if (userInputArrayForQuestion[0].name === question.name[0].value){
    console.log(userInputArrayForQuestion[0].name);
    for (let j = 0; j <userInputArrayForQuestion.length;j++){
     if(userInputArrayForQuestion[j].value === answerr.value){
     //console.log(userInputArray[i].value);
     //console.log(answerr.attributes.fraction);
     //console.log(answerr.attributes.fraction);
     score[i] += parseInt(answerr.attributes.fraction);
     console.log(score[i]);
     }}
     //else{
     //score[i] = parseInt(answerr.attributes.fraction);
     //}
     //Id = userInputArray[i].Id

     }
    
    
    
    
    
    
    
    
    } 
    else {
  	console.log("No user inputs for question", questionId);
    }
     
    //console.log(userInputArray[i].name)
    //console.log(question.name[0].value)
    } })

    }







    else if (type === 'shortanswer'){
      const answers = question.answer;
      //console.log(question.answer);
      answers.forEach(answerr => {
      //console.log(question.name[0].value);
      //console.log(answer.attributes.fraction);
      //console.log(answerr.value);
      for (let i = 0; i <numberOfQuestions; i++) {
      const questionId = `q${i}`; 
      const userInputArrayForQuestion = userInputArrays[questionId];
      if (userInputArrayForQuestion.length > 0) {
      const firstName = userInputArrayForQuestion[0].name; // Access the name property of the first element
      //console.log("Name of the first input for question", questionId, ":", firstName);
      
      
      
      if (userInputArrayForQuestion[0].name === question.name[0].value){
      console.log(userInputArrayForQuestion[0].name);
      for (let j = 0; j <userInputArrayForQuestion.length;j++){
       if(userInputArrayForQuestion[j].value === answerr.value){
       //console.log(userInputArray[i].value);
       //console.log(answerr.attributes.fraction);
       //console.log(answerr.attributes.fraction);
       score[i] += parseInt(answerr.attributes.fraction);
       console.log(score[i]);
       }}
       //else{
       //score[i] = parseInt(answerr.attributes.fraction);
       //}
       //Id = userInputArray[i].Id
  
       }
      
      
      
      
      
      
      
      
      } 
      else {
      console.log("No user inputs for question", questionId);
      }
       
      //console.log(userInputArray[i].name)
      //console.log(question.name[0].value)
      } })
  
      }
    

    })

//});
    

  //console.log(Id);
                        console.log(score);
    
    
    let result = 0;
    for(let i=0; i <score.length; i++){
    if (score[i]>0){
      if (score[i] === 99){
        score[i] = 100;
      }
    result += score[i];
    }}
    
    const resultsPage = `
            <!DOCTYPE html>
            <html lang="en">
            <head>
                <meta charset="UTF-8">
                <meta name="viewport" content="width=device-width, initial-scale=1.0">
                <title>Quiz Results</title>
                <link rel="stylesheet" type="text/css" href="Quiz_results.css">
            </head>
            <body>
            <div class="container" id="container">
                <h1>Quiz Results</h1>
                <p>Your Score: ${result/100} Out of ${numberOfQuestions}</p>
                <!-- You can include more details about the results here -->
            </div>
            </body>
            </html>
        `;

        // Open the results page in a new window/tab
        const resultsWindow = window.open('', '_blank');
        resultsWindow.document.open();
        resultsWindow.document.write(resultsPage);
        resultsWindow.document.close();


    
    
 
    
    
    
    
    
    
    
    
    
    
    
    
    

    // You can perform further processing with jsonData here
  })

  .catch(error => {
    console.error('There was a problem with the fetch operation:', error);
  });
































}
















// Add an event listener to the Submit button to trigger data collection
const submitButton = document.getElementById("Submit");
submitButton.addEventListener("click", all);

    
    
    
    
    
    
    
    
    
    
    
    
    
    /*
    const quizContainer = document.getElementById("container");
    const submitButton = document.getElementById("Submit");
    const element = document.querySelector('.container>h1');
    const jsonName = fileNameDisplay.textContent+".json";
    submitButton.addEventListener("click", async function () {
      const response = await fetch(jsonName); // Replace with the actual path to your JSON file
      const questions = await response.json();
      const userAnswers = [];
  	//console.log(questions);
      // Loop through the questions and collect user answers
      questions.forEach((question, index) => {
        const questionElement = quizContainer.querySelector(`[name="q${index}"]`);
        if (question.type === "multichoice") {
            //console.log("questiontype = "+question.type);
          const selectedOption = quizContainer.querySelector(`input[name="q${index}"]:checked`);
          console.log("radio ="+selectedOption);
          if (selectedOption) {
            userAnswers.push(selectedOption.value);
          } else {
            userAnswers.push(null);
          }
        } else {
          userAnswers.push(questionElement.value);
        }
      });
      
      console.log(userAnswers);

      /*
      console.log(userAnswers);
      // Compare user answers with correct answers and calculate score
      let score = 0;
      for (let i = 0; i < questions.length; i++) {
        if (questions[i].type === "multichoice") {
          if (userAnswers[i] === questions[i].correctAnswerIndex.toString()) {
            score++;
          }
        } else {
          if (userAnswers[i] === questions[i].correctAnswer.toString()) {
            score++;
          }
        }
      }
      // Display the results in another HTML page
      const resultPage = `<html>
        <head>
          <title>Quiz Result</title>
          <link rel="stylesheet" href="../docs/Quiz.css" />
        </head>
        <body>
        <dev class="container">
          <h1>Your Quiz Result</h1>
          <p>You scored ${score} out of ${questions.length}.</p>
        </div>
        </body>
      </html>`;
  
      // Open the result in a new window
      const resultWindow = window.open("", "_blank");
      resultWindow.document.write(resultPage);        */
    }); 
  //});
  
  
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
              </script>